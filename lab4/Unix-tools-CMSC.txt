cat cmsc.txt | grep -v '^$' | awk -v OFS=', ' '/^(CSI|AVW|ITV|MTH|JMP)/ {print $1, $2} !/^(CSI|AVW|ITV|MTH|JMP) / {print $0}' | awk -F')' '/^Seats/ {print $1} !/^Seats/ {print $0}' | awk -F',' '/^Seats/ {print $1, $2, $3} !/^Seats/ {print $0}' | awk -v OFS=', ' '/^CMSC/ {Class = $1} /^0/ {print Class, $0} !/(^CMSC|^0|^Seats)/ {print $0} /^Seats/ {print $3,$5,$7} ' | awk '/^CMSC/ {print combined; combined = $0} !/^CMSC/ {combined = combined", "$0;} END {print combined}'
